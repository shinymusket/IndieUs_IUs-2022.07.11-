<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="parent">
	<!-- 원생 명단(학부모 성명 포함된) 리스트 가져오기  -->
	<select id="select_kinder_list_include_parent_name" resultType="kinderVO">
		SELECT k.kinder_num, kinder_name, p1.parent_name AS "father_name", p2.parent_name AS "mather_name"
		FROM parent p1, parent p2, kinder k
		WHERE p1.kinder_num = k.kinder_num
		AND p1.relation = '부'
		AND p2.relation = '모'
	</select>
	
	<!-- 원생 조회  -->
	<select id="select_kinder_by_name" parameterType="String" resultType="kinderVO">
		SELECT k.kinder_num, kinder_name, staff_name, class_name
		FROM kinder k, staff s, class c
		WHERE k.staff_num = s.staff_num
		AND c.kinder_num = k.kinder_num
		AND kinder_name = #{kinder_name}
	</select>
	
 	<!-- 원생의 부모 데이터가 이미 있는지 조사 -->
<!-- 	<select id="select_kinder_get_parent" parameterType="hashmap" resultType="int">
		SELECT COUNT(*) FROM parent
		WHERE kinder_num = #{kinder_num}
		AND relation = #{relation}
	</select> -->
	
	
</mapper>
