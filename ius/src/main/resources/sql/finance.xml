<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="finance">
	<!-- 전체 재정 내역 조회 -->
	<select id="select_finance_list" resultType="financeVO">
		SELECT f.finance_num, b.budget_cls, s.staff_name, f.finance_edate, f.finance_cls, f.finance_ie, f.finance_amount 
		FROM finance f, budget b, staff s
		WHERE f.budget_num = b.budget_num AND
		f.staff_num = s.staff_num
	</select>
	
	<!-- 재정등록을 위한 다음 시퀀스 값 확인하기 -->
	<select id="select_finance_seq" resultType="int">
		SELECT LAST_NUMBER FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'FINANCE_SEQ'
	</select>
	
	<!-- 재정등록 -->
	<insert id="insert_finance" parameterType="financeVO">
		INSERT INTO finance VALUES( #{finance_num}, #{budget_num}, #{staff_num}, #{finance_eDate}, #{finance_cls}, #{finance_iE}, #{finance_amount}) 
	</insert>
</mapper>
